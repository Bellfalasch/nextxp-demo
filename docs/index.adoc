= Next.XP - Next.JS sites powered by Enonic XP
This is a step-by-step tutorial for building Next.js sites, where content editors get real-time WYSIWTYG page editing and preview capabilities.

:toc: right
:imagesdir: media/

[NOTE]
====
This guide assumes you are already somewhat familiar with link:https://nextjs.org/[Next.js]. Experience with Enonic is recommended, but not required. 

Please check out these tutorials before you continue:

- link:https://nextjs.org/learn/basics/create-nextjs-app[Next.js Tutorial]
- link:https://developer.enonic.com/templates/headless-cms/[Headless CMS Primer]
====

== Introduction

In this tutorial we will demonstrate a powerful approach where the structure and content in the CMS determines the URLs and content available in the front-end. This is possible as Enonic (unlike many other Headless CMS') supports tree-structures. 

This setup basically provide editors with a CMS experience they are accustomed to, and developers get a front-end that is cleanly separated from the CMS. The headless architecture ensures the content can be accessed and used by other clients as well - ofcourse.

[[nextjs-xp-flow]]
image:nextjs-xp-flow.png[title="Illustration showing request flow through from browser, via next, getting content in Enonic, and then rendered and returned to user as a regular web page.",width=912px]

== Overview

You will complete the following steps:

* Setup Enonic SDK and content via template
* Run queries against the Headless API
* Create a Next.js app using a template 
* Setting up preview in Enonic
* Rendering content based on types
* Using components to build landing pages
* Setting up page templates
* Deploying to live servers 

[[tldr]]
== TLDR;

The impatient may try out end-result of the tutorial, and get a live demo by following the instructions: If you want to learn what is really happening, head on to the <<enonic-setup#, first chapter>> of the tutorial.

=== Setup Enonic

. Sign up to Enonic Cloud: https://enonic.com/sign-up/cloud-trial
. Create a new solution based on the Next.js template
. After the solution has started, **open the "Preview API" route** in your browser
+
You should now be able to browse the API. Take a note of this URL, as you will need it later

=== Setup preview
. Sign up to Vercel: https://vercel.com/ 
. Create "Preview" project based on https://github.com/enonic/nextjs-enonic-demo
. **Configure the application** to use the Preview API URL:
+
TODO image?
+
. Verify that the Next app is now rendering pages.
+
. **Connect Enonic with the preview server** by configuring the "Next.js Demo" application in the Enonic solution interface:
+
TODO:
+
. **Log into Enonic XP admin** and launch Content Studio. You should now be able to see the preview in the right hand panel.

=== Go live

The final step is to launch a Vercel project that renders the published (aka live) content.

. **Create a new "Live" project in Vercel**, using the same Github repo
. This time, **Configure the project** to access the "Live API" instead, same approach as for the preview project.
+
The "Live" server should display a 404 page. This is because the content has not been published yet.
+
. **Publish the content** from Content Studio by selecting the site, and then `Publish Tree` from the top right menu.
. Your site should now be live and kicking
+
You can now start editing and publishing new content in Content Studio.
